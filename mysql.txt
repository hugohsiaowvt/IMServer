CREATE TABLE `hugogram`.`users` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `open_id` VARCHAR(40) NOT NULL DEFAULT '' COMMENT '對外使用id',
  `username` VARCHAR(40) NOT NULL DEFAULT '' COMMENT '使用者名字',
  `user_id` VARCHAR(40) NOT NULL DEFAULT '' COMMENT '好友搜尋id',
  `zone` VARCHAR(10) NOT NULL DEFAULT '' COMMENT '手機區碼',
  `mobile` VARCHAR(20) NOT NULL DEFAULT '' COMMENT '手機號碼',
  `sex` SMALLINT(6) NOT NULL DEFAULT '-1' COMMENT '-1:未選擇\n0:女\n1:男',
  `password` VARCHAR(100) NOT NULL DEFAULT '' COMMENT '使用者加密後密碼',
  `email` VARCHAR(40) NOT NULL DEFAULT '' COMMENT '使用者信箱',
  `area` VARCHAR(20) NOT NULL DEFAULT '' COMMENT '使用者地區',
  `create_time` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  `update_time` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `status` SMALLINT(6) NOT NULL DEFAULT '0' COMMENT '0:正常\n-1:封號',
  PRIMARY KEY (`id`),
  UNIQUE `open_id` (`open_id` ASC));


CREATE TABLE `hugogram`.`relationships` (
  `user_one_id` VARCHAR(40) NOT NULL DEFAULT '',
  `user_two_id` VARCHAR(40) NOT NULL DEFAULT '',
  `action_user_id` VARCHAR(40) NOT NULL DEFAULT '',
  `time` BIGINT(20) NOT NULL DEFAULT 0,
  `status` SMALLINT(6) NOT NULL DEFAULT 1 COMMENT '-1:無狀態\n1:等待中\n2:接受',
  `request_token` VARCHAR(40) NOT NULL DEFAULT '',
  UNIQUE KEY `pair` (`user_one_id`,`user_two_id`),
  CONSTRAINT oneId FOREIGN KEY (user_one_id) REFERENCES users(open_id),
  CONSTRAINT twoId FOREIGN KEY (user_two_id) REFERENCES users(open_id),
  CONSTRAINT actionId FOREIGN KEY (action_user_id) REFERENCES users(open_id));